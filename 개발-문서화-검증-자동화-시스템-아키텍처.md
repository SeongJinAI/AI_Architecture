# Claude Code ê°œë°œ ìë™í™” íŒŒì´í”„ë¼ì¸
 
> ì½”ë“œ ì‘ì„± â†’ ë¬¸ì„œ ìƒì„± â†’ ì¸ìˆ˜ì¸ê³„ â†’ PR ë¦¬ë·°ê¹Œì§€ ìë™í™”
 
## ê°œìš”
 
3ê°œì˜ ì—ì´ì „íŠ¸ê°€ ê°œë°œ ì‚¬ì´í´ ì „ì²´ë¥¼ ìë™í™”í•©ë‹ˆë‹¤.
 
| ì—ì´ì „íŠ¸ | ì—­í•  | íŠ¸ë¦¬ê±° |
|----------|------|--------|
| **ì—ì´ì „íŠ¸ 1** | 7ì¢… ë¬¸ì„œ ìë™ ìƒì„± | ê¸°ëŠ¥ ê°œë°œ ì™„ë£Œ ì‹œ |
| **ì—ì´ì „íŠ¸ 2** | ì»¨í…ìŠ¤íŠ¸ ì¸ìˆ˜ì¸ê³„ | `/compact` ëª…ë ¹ì–´ |
| **ì—ì´ì „íŠ¸ 3** | AI PR ë¦¬ë·° (GPT, Claude) | PR ìƒì„± ì‹œ |
 
```
ì½”ë“œ ì‘ì„± â†’ [ì—ì´ì „íŠ¸1] ë¬¸ì„œ ìƒì„± â†’ [ì—ì´ì „íŠ¸2] ì¸ìˆ˜ì¸ê³„ â†’ PR â†’ [ì—ì´ì „íŠ¸3] ìë™ ë¦¬ë·°
```
 
# ì„¸íŒ… ë°©ë²•
 
## 1ë‹¨ê³„: ë¬¸ì„œ ìë™ ìƒì„± ì—ì´ì „íŠ¸
1. ì•„ë˜ ë‘ ë°©ë²•ì¤‘ í•œê°€ì§€ë¥¼ ì„ íƒ
 - claude hook ì‚¬ìš©
 - ì§ì ‘ ëª…ë ¹ (ì €ëŠ” ì´ ë°©ì‹ì„ ë” ì„ í˜¸í•©ë‹ˆë‹¤.) (prompt: "í˜„ì¬ ë³€ê²½ ì‚¬í•­ í™•ì¸í•´ì„œ CLAUDE.md ì°¸ê³ í•´ì„œ ê´€ë ¨ ë¬¸ì„œ ìƒì„±í•´.")
2. í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `CLAUDE.md` íŒŒì¼ ìƒì„± í›„ ì•„ë˜ ë‚´ìš© ì¶”ê°€:
 
### Feature Development Completion Checklist
``` 
ê¸°ëŠ¥ ê°œë°œ ì™„ë£Œ í›„ ë°˜ë“œì‹œ ë‹¤ìŒ ë¬¸ì„œë¥¼ ì—…ë°ì´íŠ¸/ìƒì„±í•©ë‹ˆë‹¤.
```

**ë¬¸ì„œ ìœ„ì¹˜**: `src/docs/`
 
| ë¬¸ì„œ ìœ í˜• | íŒŒì¼ ìœ„ì¹˜ | ì„¤ëª… |
|----------|----------|------|
| ê¸°ëŠ¥ëª…ì„¸ì„œ | `{ê¸°ëŠ¥ëª…}_ê¸°ëŠ¥ëª…ì„¸ì„œ.md` | API ëª…ì„¸, ë°ì´í„° êµ¬ì¡° |
| ì•„í‚¤í…ì²˜ ì„¤ëª…ì„œ | `architecture/{ê¸°ëŠ¥ëª…}.md` | ì „ì²´ íë¦„ ë‹¤ì´ì–´ê·¸ë¨ |
| ì‚¬ìš©ìë§¤ë‰´ì–¼ | `user-guide/{ê¸°ëŠ¥ëª…}.md` | í™”ë©´ë³„ ì‚¬ìš©ë²• |
| ì—ëŸ¬ë©”ì„¸ì§€ | `ERROR_MESSAGES.md` | ì—ëŸ¬ ì½”ë“œ ì¶”ê°€ |
| íŠ¸ëŸ¬ë¸”ìŠˆíŒ… | `ISSUE_00X_{ì´ìŠˆëª…}.md` | ì´ìŠˆ ì›ì¸/í•´ê²° |
| ì¸ì‚¬ì´íŠ¸ | `insights/{ì£¼ì œ}.md` | ë„ë©”ì¸ ì§€ì‹ |
| ì•„í‚¤í…ì²˜ íŠ¹ì´ì‚¬í•­ | `í”„ë¡œì íŠ¸_ì•„í‚¤í…ì²˜_íŠ¹ì´ì‚¬í•­.md` | ì„¤ê³„ ê²°ì •ì‚¬í•­ |
 
#### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ê¸°ëŠ¥ëª…ì„¸ì„œ ì‘ì„±
- [ ] ì•„í‚¤í…ì²˜ ì„¤ëª…ì„œ ì‘ì„±
- [ ] ì‚¬ìš©ìë§¤ë‰´ì–¼ ì‘ì„±
- [ ] ERROR_MESSAGES.md ì—…ë°ì´íŠ¸
- [ ] ë¹Œë“œ í™•ì¸

### ì¸ìˆ˜ì¸ê³„ ê¸°ë¡
**ë¬¸ì„œ ìœ„ì¹˜**: í”„ë¡œì íŠ¸ë£¨íŠ¸/HANDOFF.md
 
#### 2026.XX.XX HH:mm
 
#### ì™„ë£Œëœ ì‘ì—…
- [ ] ì‘ì—… ë‚´ìš©
 
#### ë‹¤ìŒ ì‘ì—…
- [ ] ë‹¤ìŒ ì‘ì—… ë‚´ìš©
 
#### ì£¼ì˜ì‚¬í•­
- ë¸Œëœì¹˜ëª…, ë¹Œë“œ ì´ìŠˆ ë“±
 
#### ê´€ë ¨ íŒŒì¼
- `src/...`


## 2ë‹¨ê³„: ì¸ìˆ˜ì¸ê³„ì„œ ìë™ ìƒì„± ì—ì´ì „íŠ¸
1. ì•„ë˜ ë‘ ë°©ë²•ì¤‘ í•œê°€ì§€ë¥¼ ì„ íƒ
 - claude hook ì‚¬ìš© (ì €ëŠ” ì´ ë°©ì‹ì„ ë” ì„ í˜¸í•©ë‹ˆë‹¤.)
 - ì§ì ‘ ëª…ë ¹ (Prompt: "ëŒ€ì‹œë³´ë“œ API ì™„ë£Œëì–´. ë‹¤ìŒ ì‘ì—…ì€ ë³´ê³ ì„œ API ì‘ì—…ì´ì•¼. CLAUDE.mdë¥¼ ì°¸ê³ í•´ì„œ ì¸ìˆ˜ì¸ê³„ì„œë¥¼ ì‘ì„±í•´")
2. .claude/settings.json ì‘ì„±
   ```
   {
   "hooks": {
     "PreCompact": [
       {
         "hooks": [
              {
                "type": "command",
                "command": "python3 $CLAUDE_PROJECT_DIR/.claude/hooks/generate_handoff.py",
                "timeout": 120
              }
            ]
         }
       ]
      }
    }
   ```
   
3. .claude/hooks/generate_handoff.py ì‘ì„±

```.claude/hooks/generate_handoff.py
#!/usr/bin/env python3
import json, sys, os
from datetime import datetime

input_data = json.load(sys.stdin)
transcript_path = input_data.get("transcript_path", "")
trigger = input_data.get("trigger", "unknown")  # "manual" or "auto"
project_dir = os.environ.get("CLAUDE_PROJECT_DIR", os.getcwd())
handoff_dir = os.path.join(project_dir, "docs", "handoffs")
os.makedirs(handoff_dir, exist_ok=True)

# íŠ¸ëœìŠ¤í¬ë¦½íŠ¸ íŒŒì‹±
messages = []
if transcript_path and os.path.exists(transcript_path):
    with open(transcript_path, "r") as f:
        for line in f:
            try:
                msg = json.loads(line)
                messages.append(msg)
            except:
                pass

# ìµœê·¼ ë©”ì‹œì§€ì—ì„œ ì£¼ìš” ë‚´ìš© ì¶”ì¶œ
recent_messages = messages[-80:]  # ë§ˆì§€ë§‰ 80ê°œ ë©”ì‹œì§€
assistant_msgs = [
    m for m in recent_messages 
    if m.get("role") == "assistant" and isinstance(m.get("content"), str)
]

# íŒŒì¼ ë³€ê²½ ì¶”ì  (Write/Edit ë„êµ¬ ì‚¬ìš© ë‚´ì—­)
changed_files = set()
for m in recent_messages:
    if m.get("role") == "assistant":
        content = m.get("content", [])
        if isinstance(content, list):
            for block in content:
                if isinstance(block, dict) and block.get("type") == "tool_use":
                    tool_input = block.get("input", {})
                    file_path = tool_input.get("file_path", "")
                    if file_path:
                        changed_files.add(file_path)

now = datetime.now()
timestamp = now.strftime("%Y.%m.%d %H:%M")
filename = now.strftime("%Y%m%d_%H%M%S")

handoff = f"""# ì¸ìˆ˜ì¸ê³„ ê¸°ë¡

## {timestamp} (trigger: {trigger})

### ì„¸ì…˜ ì •ë³´
- ì„¸ì…˜ ID: {input_data.get('session_id', 'N/A')}
- ì´ ë©”ì‹œì§€ ìˆ˜: {len(messages)}
- íŠ¸ë¦¬ê±°: {'ìˆ˜ë™ /compact' if trigger == 'manual' else 'ìë™ ì»´íŒ©íŠ¸'}

### ë³€ê²½ëœ íŒŒì¼
{chr(10).join(f'- `{f}`' for f in sorted(changed_files)) if changed_files else '- ì—†ìŒ'}

### ìµœê·¼ ëŒ€í™” ìš”ì•½
{chr(10).join(f'- {m.get("content", "")[:200]}' for m in assistant_msgs[-5:])}

### ë‹¤ìŒ ì‘ì—…
- [ ] (ìˆ˜ë™ ì‘ì„± í•„ìš”)

### ì£¼ì˜ì‚¬í•­
- (ìˆ˜ë™ ì‘ì„± í•„ìš”)
"""

# ìµœì‹  ì¸ìˆ˜ì¸ê³„ì„œ (í•­ìƒ ë®ì–´ì“°ê¸°)
with open(os.path.join(project_dir, "HANDOFF.md"), "w") as f:
    f.write(handoff)

# ì•„ì¹´ì´ë¸Œ (íˆìŠ¤í† ë¦¬ ë³´ì¡´)
with open(os.path.join(handoff_dir, f"handoff_{filename}.md"), "w") as f:
    f.write(handoff)
```
 
---
 
## 3ë‹¨ê³„: PR ìë™ ë¦¬ë·° ì„¤ì •
 
1. `.github/workflows/pr-review.yml` íŒŒì¼ ìƒì„±
```yaml
name: Security Review
on:
  pull_request:
    branches: [main]
    types: [opened, synchronize]

jobs:
  security:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
      security-events: write
      id-token: write
    steps:
      - uses: actions/checkout@v6
        with:
          fetch-depth: 1

      - uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
          # Optional: Add track_progress: true for visual progress tracking during security reviews
          # track_progress: true
          prompt: |
            REPO: ${{ github.repository }}
            PR NUMBER: ${{ github.event.pull_request.number }}

            Perform a comprehensive security review:

            ## OWASP Top 10 Analysis
            - SQL Injection vulnerabilities
            - Cross-Site Scripting (XSS)
            - Broken Authentication
            - Sensitive Data Exposure
            - XML External Entities (XXE)
            - Broken Access Control
            - Security Misconfiguration
            - Cross-Site Request Forgery (CSRF)
            - Using Components with Known Vulnerabilities
            - Insufficient Logging & Monitoring

            ## Additional Security Checks
            - Hardcoded secrets or credentials
            - Insecure cryptographic practices
            - Unsafe deserialization
            - Server-Side Request Forgery (SSRF)
            - Race conditions or TOCTOU issues

            Rate severity as: CRITICAL, HIGH, MEDIUM, LOW, or NONE.
            Post detailed findings with recommendations.

          claude_args: |
            --allowedTools "mcp__github_inline_comment__create_inline_comment,Bash(gh pr comment:*),Bash(gh pr diff:*)"
```
 
---
 
2. GitHub Secrets ë“±ë¡ 
- Repository â†’ Settings â†’ Secrets and variables â†’ Actions

| Secret ì´ë¦„ | ê°’ |
|-------------|-----|
| `ANTHROPIC_API_KEY` | Anthropic API í‚¤ |
 
---


## ì‹œë‚˜ë¦¬ì˜¤
 
### ë¬¸ì„œ ìë™ ìƒì„± (ì—ì´ì „íŠ¸ 1)
```
ê¸°ëŠ¥ ê°œë°œ ì™„ë£Œ â†’ Claudeê°€ ìë™ìœ¼ë¡œ 7ì¢… ë¬¸ì„œ ìƒì„±/ì—…ë°ì´íŠ¸
```
 
### ì»¨í…ìŠ¤íŠ¸ ì¸ìˆ˜ì¸ê³„ (ì—ì´ì „íŠ¸ 2)
```
/compact ì…ë ¥ ë˜ëŠ” Auto Compact â†’ HANDOFF.md ìë™ ì—…ë°ì´íŠ¸ â†’ ë‹¤ìŒ ì„¸ì…˜ì—ì„œ ì´ì–´ì„œ ì‘ì—…
```
 
### PR ìë™ ë¦¬ë·° (ì—ì´ì „íŠ¸ 3)
```
â€¢ feature â†’ dev PR ìƒì„± ê²€ì¦ì€ GPT Codex (ì½”ë“œ ë¦¬ë·°)
â€¢ dev â†’ main PR ìƒì„± ê²€ì¦ì€ Claude Code Action (ë³´ì•ˆ ë¦¬ë·°)
```
 
---
 
## ì²´í¬ë¦¬ìŠ¤íŠ¸
 
- [ ] `CLAUDE.md` ìƒì„± (ì—ì´ì „íŠ¸ 1, 2 ê·œì¹™)
- [ ] `HANDOFF.md` ìƒì„± (ì¸ìˆ˜ì¸ê³„ í…œí”Œë¦¿)
- [ ] `.github/workflows/pr-review.yml` ìƒì„±
- [ ] GitHub Secrets ë“±ë¡ (OPENAI_API_KEY, ANTHROPIC_API_KEY)
- [ ] `src/docs/` í´ë” ìƒì„±
 
---
 
## ê²°ê³¼ë¬¼ ì˜ˆì‹œ
 
### ìë™ ìƒì„±ë˜ëŠ” ë¬¸ì„œ (ì—ì´ì „íŠ¸ 1)
```
src/docs/
â”œâ”€â”€ ì§ì›ì •ë³´ê´€ë¦¬_ê¸°ëŠ¥ëª…ì„¸ì„œ.md
â”œâ”€â”€ ERROR_MESSAGES.md
â”œâ”€â”€ architecture/
â”‚   â””â”€â”€ ì§ì›ì •ë³´ê´€ë¦¬_ì•„í‚¤í…ì²˜_ì„¤ëª…ì„œ.md
â”œâ”€â”€ user-guide/
â”‚   â””â”€â”€ ì§ì›ì •ë³´ê´€ë¦¬_ì‚¬ìš©ìë§¤ë‰´ì–¼.md
â””â”€â”€ insights/
    â””â”€â”€ ê±´ì„¤_ë ˆë¯¸ì½˜íƒ€ì„¤.md
```
 
### ì¸ìˆ˜ì¸ê³„ ê¸°ë¡ (ì—ì´ì „íŠ¸ 2)
```markdown
## 2024.02.06 15:30
 
### ì™„ë£Œëœ ì‘ì—…
- [x] ì§ì› ì •ë³´ ê´€ë¦¬ API êµ¬í˜„
- [x] ê¸°ëŠ¥ëª…ì„¸ì„œ ì‘ì„±
 
### ë‹¤ìŒ ì‘ì—…
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
- [ ] PR ìƒì„±
```
 
### PR ë¦¬ë·° ì½”ë©˜íŠ¸ (ì—ì´ì „íŠ¸ 3)
```
## ğŸ¤– GPT Codex Review
- UserService.java:45 - null ì²´í¬ ê¶Œì¥
 
## ğŸ”’ Claude Security Review
- [x] SQL ì¸ì ì…˜: ì•ˆì „
- [x] XSS: ì•ˆì „
```
 
